% Test Case 8 -- Free Variables
%  
% No constant parameters are found
% 
% lpeconstelm cannot detect (i==5)

act action: Nat;

proc X(i: Nat)   = (i <  5) -> action(i).X(i+1) +
                   (i == 5) -> action(i).Y(i, i);
     Y(i,j: Nat) = action(j).Y(i,j+1);               

init X(0);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% NOTE:                                                  %%
%% =====                                                  %%
%%                                                        %%
%% Use: mcrl22lpe --no-cluster $DIR$/case8.mcrl2          %%
%%                                                        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                                        %%
%% var  freevar0: Nat;                                    %%
%% proc P(s3: Pos, i,j: Nat) =                            %%
%%        (s3 == 2) ->                                    %%
%%          action(j) .                                   %%
%%          P(s3 := 2, j := j + 1)                        %%
%%      + (s3 == 1 && i < 5) ->                           %%
%%          action(i) .                                   %%
%%           P(s3 := 1, i := i + 1, j := freevar0)        %%
%%      + (s3 == 1 && i == 5) ->                          %%
%%          action(i) .                                   %%
%%          P(s3 := 2, j := i);                           %%
%%                                                        %%
%% var  freevar: Nat;                                     %%
%% init P(s3 := 1, i := 0, j := freevar);                 %%
%%                                                        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
